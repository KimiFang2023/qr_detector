# 摄像头二维码检测工具使用说明

这个工具可以帮助你使用电脑或树莓派的摄像头实时检测和识别二维码！

## 功能特点

- 📷 使用YOLO模型快速定位图像中的二维码
- 🔍 结合传统图像处理方法（CLAHE、阈值化等）提高二维码识别率
- 💻 支持实时显示检测结果和FPS
- 💾 自动保存识别到二维码的图像
- ⚡ 针对树莓派进行了性能优化

## 安装要求

在使用这个工具之前，你需要确保已经安装了以下Python库：

```
pip install opencv-python numpy ultralytics pyzbar
```

## 如何使用

### 基本使用

1. 确保你的电脑或树莓派已经连接了摄像头
2. 确保项目中已有训练好的YOLO模型（默认路径：`./models/best.pt`）
3. 直接运行以下命令：

```
python camera_qr_detector.py
```

### 退出程序

在程序运行时，按下键盘上的 `q` 键即可退出。

## 结果保存

程序会自动将识别到二维码的图像保存在 `./process/camera_results/` 文件夹中。

## 性能优化说明

为了在树莓派上流畅运行，这个工具做了以下优化：

1. 限制了FPS（默认15帧/秒）
2. 降低了摄像头分辨率（默认640x480）
3. 采用了轻量级的图像处理方法
4. 避免重复识别相同的二维码

## 常见问题解决

### 问题1：无法启动摄像头

- 确保摄像头已正确连接
- 检查是否有其他程序正在使用摄像头
- 尝试修改代码中的 `camera_id` 参数（默认为0）

### 问题2：识别率不高

- 确保二维码清晰可见，避免模糊或严重倾斜
- 确保光线充足
- 可以尝试调整代码中的预处理参数

### 问题3：在树莓派上运行卡顿

- 可以尝试进一步降低分辨率，例如 `resolution=(320, 240)`
- 可以降低FPS限制，例如 `fps_limit=10`
- 可以将 `enable_preprocessing` 设置为 `False` 来关闭预处理

## 代码结构说明

这个工具的代码主要包含以下几个部分：

1. **初始化**：设置摄像头参数、加载YOLO模型
2. **图像预处理**：使用传统方法优化图像质量
3. **二维码识别**：使用pyzbar库识别二维码内容
4. **结果绘制**：在图像上显示检测框和识别结果
5. **主循环**：持续获取摄像头图像并进行处理

## 给高中生的学习建议

如果你是高中生，想学习更多关于计算机视觉和二维码识别的知识，可以从以下几个方面入手：

1. 学习Python编程语言基础
2. 了解OpenCV库的基本使用方法
3. 学习简单的图像处理概念（如图像滤波、阈值化等）
4. 了解二维码的基本原理
5. 尝试修改代码中的参数，观察不同参数对识别效果的影响

希望这个工具能帮助你探索计算机视觉的奇妙世界！